<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Card Entry</title>
    <style>
      :root {
        --bg: #0b0f14;
        --panel: #121926;
        --text: #f5f7fb;
        --muted: rgba(245, 247, 251, 0.7);
        --border: rgba(255, 255, 255, 0.12);
        --danger: #ff5b5b;
        --ok: #4ade80;
        --btn: rgba(255, 255, 255, 0.12);
        --btnPrimary: rgba(255, 255, 255, 0.22);
      }
      body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: var(--bg); color: var(--text); }
      .container { max-width: 720px; margin: 0 auto; padding: 16px 12px 20px; }
      .panel { border: 1px solid var(--border); background: var(--panel); border-radius: 14px; padding: 14px; }
      .row { display: grid; grid-template-columns: 1fr; gap: 12px; }
      @media (min-width: 560px) { .row.two { grid-template-columns: 1fr 1fr; } }
      label { display: block; font-size: 12px; color: var(--muted); margin: 0 0 6px; }
      .hosted-field { box-sizing: border-box; padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: rgba(255, 255, 255, 0.06); min-height: 44px; display: flex; align-items: center; }
      .mock-input { width: 100%; box-sizing: border-box; border: none; background: transparent; color: var(--text); outline: none; font-size: 16px; }
      .message { display: none; margin-top: 12px; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--border); background: rgba(255, 255, 255, 0.04); font-size: 13px; line-height: 1.4; }
      .message.ok { border-color: rgba(74, 222, 128, 0.35); color: var(--ok); }
      .message.error { border-color: rgba(255, 91, 91, 0.35); color: var(--danger); }
      .actions { display: flex; gap: 10px; margin-top: 14px; }
      button { flex: 1; min-height: 44px; border-radius: 12px; border: 1px solid var(--border); background: var(--btn); color: var(--text); font-weight: 600; cursor: pointer; }
      button.primary { background: var(--btnPrimary); }
      button:disabled { opacity: 0.6; cursor: not-allowed; }
    </style>
  </head>
  <body>
    <div class="container">
      <form id="payment-form" class="panel" aria-label="Card entry form" autocomplete="off">
        <div class="row" style="margin-top: 12px">
          <div>
            <label for="cardNumberInput">Card Number</label>
            <div class="hosted-field">
              <input id="cardNumberInput" class="mock-input" inputmode="numeric" autocomplete="cc-number" placeholder="4111 1111 1111 1111" required maxlength="19" pattern="\d{16,19}">
            </div>
          </div>
        </div>
        <div class="row two" style="margin-top: 12px">
          <div>
            <label for="expInput">Expiration Date</label>
            <div class="hosted-field">
              <input id="expInput" class="mock-input" inputmode="numeric" autocomplete="cc-exp" placeholder="MM/YY" required maxlength="5" pattern="^(0[1-9]|1[0-2])\/?([0-9]{2})$">
            </div>
          </div>
          <div>
            <label for="cvvInput">CVV</label>
            <div class="hosted-field">
              <input id="cvvInput" class="mock-input" inputmode="numeric" autocomplete="cc-csc" placeholder="123" required maxlength="4" pattern="\d{3,4}">
            </div>
          </div>
        </div>
        <div id="message" class="message" role="status" aria-live="polite"></div>
        <div class="actions">
          <button id="cancelBtn" type="button">Cancel</button>
          <button id="payBtn" class="primary" type="submit" disabled>Continue</button>
        </div>
      </form>
    </div>
    <script>
      // Only mock mode for GitHub Pages (no Braintree)
      (function () {
        document.getElementById('message').style.display = 'block';
        document.getElementById('message').textContent = 'Initializing...';

        var payBtn = document.getElementById('payBtn');
        var cancelBtn = document.getElementById('cancelBtn');
        var form = document.getElementById('payment-form');
        var cardNumberInput = document.getElementById('cardNumberInput');
        var expInput = document.getElementById('expInput');
        var cvvInput = document.getElementById('cvvInput');
        var messageEl = document.getElementById('message');

        function validateInputs() {
          return (
            cardNumberInput.value.replace(/\s+/g, '').length >= 13 &&
            expInput.value.match(/^(0[1-9]|1[0-2])\/([0-9]{2})$/) &&
            cvvInput.value.length >= 3
          );
        }

        function setMessage(text, kind) {
          messageEl.className = 'message' + (kind ? ' ' + kind : '');
          messageEl.textContent = text;
          messageEl.style.display = 'block';
        }

        function resetForm() {
          payBtn.disabled = true;
          cancelBtn.disabled = false;
        }

        cardNumberInput.addEventListener('input', updateBtnState);
        expInput.addEventListener('input', updateBtnState);
        cvvInput.addEventListener('input', updateBtnState);

        function updateBtnState() {
          payBtn.disabled = !validateInputs();
        }

        cancelBtn.addEventListener('click', function () {
          setMessage('Canceled.', '');
          cardNumberInput.value = '';
          expInput.value = '';
          cvvInput.value = '';
          resetForm();
        });

        form.addEventListener('submit', function (e) {
          e.preventDefault();
          payBtn.disabled = true;
          cancelBtn.disabled = true;

          setMessage('Saving payment method...', '');
          setTimeout(function () {
            if (!validateInputs()) {
              setMessage('Invalid card details.', 'error');
              resetForm();
              return;
            }
            setMessage('Saved (mock, no Braintree).', 'ok');
            resetForm();
          }, 800);
        });

        setMessage('Ready.', '');
        resetForm();
      })();
    </script>
  </body>
</html>
